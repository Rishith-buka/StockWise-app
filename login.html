<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StockWise - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .gradient-text {
        background: linear-gradient(to right, #2563eb, #7c3aed, #ec4899);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
      }
      .input-focus:focus {
        outline: none;
        border: 2px solid #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }
      .btn-login {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transition:
          transform 0.3s,
          box-shadow 0.3s;
      }
      .btn-login:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
      }
      .floating-card {
        backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.95);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div class="min-h-screen gradient-bg flex items-center justify-center p-4">
      <div class="w-full max-w-md">
        <!-- Logo Section -->
        <div class="text-center mb-8">
          <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">
            StockWise
          </h1>
          <p class="text-white/80 text-sm md:text-base">
            Master the market, build your wealth
          </p>
        </div>

        <!-- Login Card -->
        <div class="floating-card rounded-2xl shadow-2xl p-8 md:p-10 mb-6">
          <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">
            Welcome Back
          </h2>
          <p class="text-gray-600 mb-8">
            Sign in to continue your learning journey
          </p>

          <form id="loginForm" onsubmit="handleLogin(event)">
            <!-- Email Input -->
            <div class="mb-6">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Email Address
              </label>
              <input
                type="email"
                id="email"
                placeholder="you@example.com"
                required
                class="input-focus w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 transition-all"
              />
            </div>

            <!-- Password Input -->
            <div class="mb-2">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Password
              </label>
              <input
                type="password"
                id="password"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                required
                class="input-focus w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 transition-all"
              />
            </div>

            <!-- Forgot Password Link -->
            <div class="text-right mb-6">
              <a
                href="#"
                onclick="alert('Password reset link sent to your email!')"
                class="text-sm text-purple-600 hover:text-purple-700 font-medium transition-colors"
              >
                Forgot password?
              </a>
            </div>

            <!-- Remember Me -->
            <div class="flex items-center mb-6">
              <input
                type="checkbox"
                id="remember"
                class="w-4 h-4 text-purple-600 border-gray-300 rounded cursor-pointer"
              />
              <label
                for="remember"
                class="ml-2 text-sm text-gray-600 cursor-pointer"
              >
                Keep me signed in
              </label>
            </div>

            <!-- Login Button -->
            <button
              type="submit"
              class="btn-login w-full py-3 px-4 text-white font-semibold rounded-lg mb-4"
            >
              Sign In
            </button>
          </form>

          <!-- Divider -->
          <div class="relative mb-6">
            <div class="absolute inset-0 flex items-center">
              <div class="w-full border-t border-gray-300"></div>
            </div>
            <div class="relative flex justify-center text-sm">
              <span class="px-2 bg-white text-gray-500">OR</span>
            </div>
          </div>

          <!-- Demo Access -->
          <button
            onclick="handleDemoLogin()"
            class="w-full py-3 px-4 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:border-purple-600 hover:text-purple-600 transition-all mb-4"
          >
            Try Demo Account
          </button>

          <!-- Signup Link -->
          <p class="text-center text-gray-600 text-sm">
            Don't have an account?
            <a
              href="#"
              onclick="alert('Sign up page coming soon!')"
              class="text-purple-600 hover:text-purple-700 font-semibold transition-colors"
            >
              Create one now
            </a>
          </p>
        </div>

        <!-- Social Login (Google) -->
        <div class="space-y-3 mb-6">
          <div
            id="g_id_onload"
            data-client_id="YOUR_GOOGLE_CLIENT_ID"
            data-callback="handleGoogleLogin"
          ></div>
          <div
            class="g_id_signin"
            data-type="standard"
            data-size="large"
            data-theme="outline"
            data-text="signin_with"
            data-shape="rectangular"
            data-logo_alignment="left"
            style="width: 100%; display: flex; justify-content: center"
          ></div>
          <!-- Fallback Button -->
          <button
            id="googleFallback"
            onclick="handleGoogleSignup()"
            class="floating-card w-full py-3 px-4 rounded-lg font-medium text-gray-700 hover:bg-gray-100 transition-all flex items-center justify-center gap-2"
          >
            <span class="text-xl">ðŸ”µ</span>
            Continue with Google
          </button>
        </div>

        <!-- Footer -->
        <div class="text-center text-white/80 text-xs space-y-1">
          <p>
            <a href="#" class="hover:text-white transition-colors"
              >Privacy Policy</a
            >
            â€¢
            <a href="#" class="hover:text-white transition-colors"
              >Terms of Service</a
            >
          </p>
          <p>Â© 2026 StockWise. All rights reserved.</p>
        </div>
      </div>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
      // Google Sign-In Callback
      function handleGoogleLogin(response) {
        console.log("Google Sign-In Response:", response);

        if (response.credential) {
          const token = response.credential;

          // Decode JWT token (basic decode without verification)
          try {
            const base64Url = token.split(".")[1];
            const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
            const jsonPayload = decodeURIComponent(
              atob(base64)
                .split("")
                .map(
                  (c) => "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2),
                )
                .join(""),
            );
            const userData = JSON.parse(jsonPayload);

            console.log("Google User Data:", userData);

            // Save user data
            localStorage.setItem("user_email", userData.email);
            localStorage.setItem("user_name", userData.name);
            localStorage.setItem("user_picture", userData.picture);
            localStorage.setItem("user_logged_in", "true");
            localStorage.setItem("user_google_id", userData.sub);

            // Show success message
            alert(`Welcome, ${userData.name}! Redirecting to app...`);

            // Redirect to app
            setTimeout(() => {
              window.location.href = "app.html";
            }, 1000);
          } catch (error) {
            console.error("Error decoding token:", error);
            alert("Error processing Google login. Please try again.");
          }
        }
      }

      // Fallback Google Signup Handler (if official button doesn't work)
      function handleGoogleSignup() {
        console.log("Google Sign-Up attempt");

        // Simulate Google login
        const mockGoogleUser = {
          email:
            "googleuser" + Math.floor(Math.random() * 10000) + "@gmail.com",
          name: "Google User",
          picture: "https://lh3.googleusercontent.com/a/default-user",
          sub: "google_" + Math.random().toString(36).substr(2, 9),
        };

        console.log("Mock Google User:", mockGoogleUser);

        // Save user data
        localStorage.setItem("user_email", mockGoogleUser.email);
        localStorage.setItem("user_name", mockGoogleUser.name);
        localStorage.setItem("user_picture", mockGoogleUser.picture);
        localStorage.setItem("user_logged_in", "true");
        localStorage.setItem("user_google_id", mockGoogleUser.sub);

        // Show notification
        alert(`Welcome, ${mockGoogleUser.name}! Redirecting to app...`);

        // Redirect to app
        setTimeout(() => {
          window.location.href = "app.html";
        }, 1000);
      }

      function handleLogin(event) {
        event.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const remember = document.getElementById("remember").checked;

        if (email && password) {
          console.log("Login attempt:", {
            email,
            password: "***",
            remember,
          });

          // Show loading state
          const btn = event.target.querySelector("button[type='submit']");
          btn.textContent = "Signing in...";
          btn.disabled = true;

          // Simulate login delay
          setTimeout(() => {
            // Save login state
            localStorage.setItem("user_email", email);
            localStorage.setItem("user_logged_in", "true");
            if (remember) {
              localStorage.setItem("user_remember", "true");
            }

            // Redirect to main app
            window.location.href = "app.html";
          }, 1500);
        }
      }

      function handleDemoLogin() {
        console.log("Demo login attempt");

        // Save demo login state
        localStorage.setItem("user_email", "demo@example.com");
        localStorage.setItem("user_logged_in", "true");
        localStorage.setItem("user_is_demo", "true");

        // Show notification
        alert("Demo account activated! Redirecting...");

        // Redirect to main app
        window.location.href = "app.html";
      }

      // Check if already logged in
      window.addEventListener("load", function () {
        const isLoggedIn = localStorage.getItem("user_logged_in");
        if (isLoggedIn === "true") {
          console.log("User already logged in, redirecting to app...");
          window.location.href = "app.html";
        }
      });

      // Add input validation feedback
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");

      if (emailInput && passwordInput) {
        emailInput.addEventListener("blur", function () {
          if (this.value && !this.value.includes("@")) {
            this.classList.add("border-red-500");
          } else {
            this.classList.remove("border-red-500");
          }
        });

        passwordInput.addEventListener("focus", function () {
          if (this.value.length < 6) {
            this.classList.add("border-yellow-500");
          }
        });

        passwordInput.addEventListener("blur", function () {
          this.classList.remove("border-yellow-500");
        });
      }
    </script>
  </body>
</html>
